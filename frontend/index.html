<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Licensure Buddy IL - סיוע לרישוי עסקים</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Licensure Buddy IL</h1>
            <p>מערכת סיוע לרישוי עסקים בישראל</p>
        </header>

        <main>
            <section class="form-section">
                <h2>פרופיל העסק</h2>
                <form id="businessForm">
                    <div class="form-group">
                        <label for="size">גודל העסק:</label>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="size" value="small" required>
                                קטן
                            </label>
                            <label>
                                <input type="radio" name="size" value="medium" required>
                                בינוני
                            </label>
                            <label>
                                <input type="radio" name="size" value="large" required>
                                גדול
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="seats">מספר מקומות ישיבה:</label>
                        <input type="number" id="seats" name="seats" min="0" value="0" required>
                    </div>

                    <div class="form-group">
                        <label for="area_sqm">שטח העסק (מ״ר):</label>
                        <input type="number" id="area_sqm" name="area_sqm" min="0" value="0">
                    </div>

                    <div class="form-group">
                        <label for="staff_count">מספר עובדים במשמרת:</label>
                        <input type="number" id="staff_count" name="staff_count" min="0" value="0">
                    </div>

                    <div class="form-group">
                        <label>מאפיינים נוספים:</label>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" name="features" value="gas">
                                גז
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="meat">
                                בשר
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="delivery">
                                משלוחים
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="alcohol">
                                הגשת אלכוהול
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="outdoor">
                                מקומות ישיבה חיצוניים
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="music">
                                מוסיקה/בידור
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="smoking">
                                אזור עישון
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="kitchen_hot">
                                מטבח חם
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="kitchen_cold">
                                מטבח קר בלבד
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="dairy">
                                מזון חלבי
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="fish">
                                מזון דגים
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="vegan">
                                טבעוני
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="night">
                                פתוח אחרי חצות
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="takeaway">
                                איסוף עצמי
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="grease_trap">
                                מלכודת שומן
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="hood_vent">
                                מנדף/מערכת יניקה תקינה
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="fire_ext">
                                מטפי כיבוי ניידים
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="sprinkler">
                                מערכת מתזים/ספרינקלרים
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="handwash">
                                עמדות שטיפת ידיים
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="refrigeration">
                                קירור מסחרי
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="freezer">
                                מקפיא/הקפאה
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="allergen_note">
                                הצהרת אלרגנים בתפריט
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="accessibility">
                                נגישות לנכים
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="signage">
                                רישיון ושילוט במקום בולט
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="pest_control">
                                הדברה תקופתית
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="waste_sep">
                                הפרדת פסולת/שמן בישול
                            </label>
                            <label>
                                <input type="checkbox" name="features" value="gas_cert">
                                בדיקת גז בתוקף
                            </label>
                        </div>
                    </div>

                    <button type="submit" id="submitBtn">קבל דוח</button>
                </form>
            </section>

            <section class="results-section" id="resultsSection" style="display: none;">
                <h2>התאמות שנמצאו</h2>
                
                <!-- Statistics Summary -->
                <div class="stats-section" id="statsSection">
                    <h3>סיכום סטטיסטי</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalMatches">0</div>
                            <div class="stat-label">סה"כ התאמות</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="highPriorityCount">0</div>
                            <div class="stat-label">עדיפות גבוהה</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="mediumPriorityCount">0</div>
                            <div class="stat-label">עדיפות בינונית</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="lowPriorityCount">0</div>
                            <div class="stat-label">עדיפות נמוכה</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="priorityChart" width="400" height="200"></canvas>
                    </div>
                    <div class="stats-actions">
                        <button type="button" id="smartReportBtn" class="smart-report-btn">דוח חכם - AI</button>
                    </div>
                </div>

                <!-- Filter Section -->
                <div class="filter-section" id="filterSection">
                    <h3>סינון תוצאות</h3>
                    <div class="filter-controls">
                        <div class="filter-group">
                            <label for="severityFilter">עדיפות:</label>
                            <select id="severityFilter">
                                <option value="all">הכל</option>
                                <option value="High">גבוהה</option>
                                <option value="Medium">בינונית</option>
                                <option value="Low">נמוכה</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="categoryFilter">קטגוריה:</label>
                            <select id="categoryFilter">
                                <option value="all">הכל</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="featureFilter">מאפיין:</label>
                            <select id="featureFilter">
                                <option value="all">הכל</option>
                            </select>
                        </div>
                        <button type="button" id="clearFilters" class="clear-filters-btn">נקה סינון</button>
                    </div>
                </div>

                <div id="matchesContainer"></div>
            </section>

        </main>

        <footer>
            <p>© 2024 Licensure Buddy IL - מערכת סיוע לרישוי עסקים</p>
        </footer>
    </div>

    <!-- Smart Report Side Window Modal -->
    <div id="smartReportModal" class="smart-report-modal" style="display: none;">
        <div class="modal-backdrop" id="modalBackdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>דוח חכם - AI Report</h2>
                <button type="button" class="modal-close" id="modalCloseBtn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-loading" id="modalLoading" style="display: none;">
                    <div class="loading-spinner"></div>
                    <p>יוצר דוח חכם...</p>
                </div>
                <div class="modal-report-content" id="modalReportContent">
                    <!-- Report content will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <div class="modal-actions">
                    <span class="modal-model-badge" id="modalModelBadge" style="display: none;"></span>
                    <button type="button" id="modalCopyBtn" class="modal-action-btn copy-btn" style="display: none;">
                        📋 העתקה
                    </button>
                    <button type="button" id="modalDownloadBtn" class="modal-action-btn download-btn" style="display: none;">
                        💾 הורדה (.txt)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>
